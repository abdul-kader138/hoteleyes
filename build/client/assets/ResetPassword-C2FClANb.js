import{w as g}from"./with-props-DTX1ldRb.js";import{p as h,q as b,l as s}from"./chunk-HA7DTUK3-Cn8qSWCH.js";import{o as j,s as c,u as y,a as P}from"./schemas-ssuNMdJ0.js";import{O as v,c as N}from"./index-CPtTDup7.js";import{F as _}from"./index-DVkn256j.js";import{L as e}from"./lang-mZGjBYwh.js";import{H as S}from"./helper-CR7ZVfzC.js";function A({}){return[{title:e.title+" - "+e.reset_password},{name:"description",content:e.welcome_fx+" - "+e.reset_password}]}const C=j({password:c().min(6,e.invalid_password),confirmPassword:c().min(6,e.invalid_password)}).refine(a=>a.password===a.confirmPassword,{message:e.password_not_matched,path:["confirmPassword"]}),H=g(function(){const{token:l}=h(),p=b(),{BASE_API:w}=new S,{register:n,handleSubmit:u,watch:i,setValue:d,formState:{errors:t,isSubmitting:m}}=y({resolver:P(C),defaultValues:{password:"",confirmPassword:""}}),f=async r=>{try{const o=await fetch(`${w}/auth/reset-password`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:l,newPassword:r.password})}),x=await o.json();if(!o.ok)throw new Error(x.message);sessionStorage.setItem("success_message",e.password_update_success),p("/login")}catch(o){N.error(o.message)}};return s.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[s.jsx(v,{position:"top-right"}),s.jsx("div",{className:"bg-gray-800 min-w-md rounded-lg shadow-lg p-5 sm:p-5 lg:p-16",children:s.jsxs("form",{onSubmit:u(f),className:"space-y-5",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("a",{href:"/",children:s.jsx("img",{src:"/images/logos/logo.svg",alt:"Logo",className:"mx-auto h-10 w-auto"})}),s.jsx("h1",{className:"text-white text-xl font-semibold mt-6",children:e.reset_password})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("input",{type:"password",placeholder:e.new_password,...n("password"),value:i("password"),onChange:r=>d("password",r.target.value),className:"w-full p-3 rounded-full bg-gray-700 text-sm text-white border border-gray-600 focus:border-[#D90479] outline-none"}),t.password&&s.jsx("p",{className:"text-red-500 px-2 pt-1 text-sm",children:t.password.message})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("input",{type:"password",placeholder:e.confirm_password,...n("confirmPassword"),value:i("confirmPassword"),onChange:r=>d("confirmPassword",r.target.value),className:"w-full p-3 rounded-full bg-gray-700 text-sm text-white border border-gray-600 focus:border-[#D90479] outline-none"}),t.confirmPassword&&s.jsx("p",{className:"text-red-500 px-2 pt-1 text-sm",children:t.confirmPassword.message})]}),s.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 cursor-pointer text-sm bg-[#D90479] hover:scale-[1.05] transition-transform text-white font-semibold rounded-full flex items-center justify-center",children:m?s.jsx(_,{className:"animate-spin text-xl"}):e.continue})]})})]})});export{H as default,A as meta};
