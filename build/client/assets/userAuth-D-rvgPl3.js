import{r as o}from"./chunk-HA7DTUK3-Cn8qSWCH.js";import{H as r}from"./helper-CR7ZVfzC.js";const{BASE_API:s}=new r;async function f(){try{const e=await fetch(`${s}/auth/me`,{credentials:"include"});if(!e.ok)return null;const t=await e.json();return(t==null?void 0:t.user)||null}catch{return null}}function w(){const[e,t]=o.useState(null),[a,u]=o.useState(!0),c=new r;o.useEffect(()=>{async function n(){const i=await f();t(i),u(!1)}n()},[]);async function l(){try{await c.api.post(`${s}/auth/logout`),t(null),window.location.href="/login"}catch(n){console.error("Logout failed:",n)}}return{user:e,logout:l,loading:a}}export{f,w as u};
